server{
        listen 80 default_server;
        server_name localhost;
        return 301 https://$host$request_uri;
}


server {
        listen 443 ssl http2 default_server;
        server_name localhost;
        root /usr/share/nginx/html;
        index index.php index.html index.htm;

        ssl_certificate /etc/nginx/server.crt;
        ssl_certificate_key /etc/nginx/server.key;


        location / {
                proxy_pass      http://flask:5000;
        }

	# location ~ \.php$ {
        #         try_files $uri /index.php =404;
        #         fastcgi_split_path_info ^(.+\.php)(/.+)$;
        #         fastcgi_pass   fpm:9000;
        #         fastcgi_index  index.php;
        #         include        fastcgi_params;
        #         fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        #         fastcgi_param  PATH_INFO $fastcgi_path_info;
        # }

	location ~ /\.ht {
                deny all;
        }                                                            
}

